# 数据库设计

[TOC]

### 1.系统用户表（sys_user）

|   名称    |     类型     | 是否可空 | 是否为主键 |                    注释                     |
| :-------: | :----------: | :------: | :--------: | :-----------------------------------------: |
|  unionid  | varchar(30)  |    N     |     Y      |          微信用户在平台的唯一标识           |
| mp_openid | varchar(30)  |    Y     |     N      | 小程序用户唯一标识（mp是miniprogram的缩写） |
| nickname  | varchar(30)  |    Y     |     N      |                微信用户昵称                 |
|  avatar   | varchar(255) |    Y     |     N      |            微信用户头像,uml地址             |
|   sign    | varchar(255) |    Y     |     N      |          用户个性签名，默认为null           |



### 2.座位表（seat）

|   名称    |    类型     | 是否可空 | 是否为主键 |                    注释                     |
| :-------: | :---------: | :------: | :--------: | :-----------------------------------------: |
|  seat_id  | varchar(30) |    N     |     Y      |                   座位ID                    |
| area_name | varchar(30) |    Y     |     N      |                    区域                     |
| is_window |     int     |    Y     |     N      |   是否靠窗。默认为0（0：不靠窗；1：靠窗）   |
|  is_plug  |     int     |    Y     |     N      | 是否有插座。默认为0（0：无插座；1：有插座） |



### 3.占座表(每天10点清空一次)（occupy）

|    名称    |    类型     | 是否可空 | 是否为主键 |                             注释                             |
| :--------: | :---------: | :------: | :--------: | :----------------------------------------------------------: |
|  unionid   | varchar(30) |    N     |     Y      |                   微信用户在平台的唯一标识                   |
|  seat_id   | varchar(30) |    N     |     Y      |                            座位ID                            |
| time_slot  |     int     |    N     |     Y      | 占用时间段。默认为-1（-1：上午8:00—13:00；0：下午13:00—17:30；1：晚上17:30—22:00） |
| is_confirm |     int     |    Y     |     N      |         是否确认入座。默认为0(0：未确认；1：已确认)          |

### 4.信息记录表(用来记录历史信息)（record）

|    名称    |    类型     | 是否可空 | 是否为主键 |                             注释                             |
| :--------: | :---------: | :------: | :--------: | :----------------------------------------------------------: |
|  unionid   | varchar(30) |    N     |     Y      |                   微信用户在平台的唯一标识                   |
|  seat_id   | varchar(30) |    N     |     Y      |                            座位ID                            |
|  occ_date  | varchar(30) |    N     |     Y      |                 被占座时间，格式：yyyy-mm-dd                 |
| time_slot  |     int     |    N     |     Y      | 占用时间段。默认为-1（-1：上午8:00—13:00）；0：下午13:00—17:30；1：晚上17:30—22:00） |
| is_confirm |     int     |    Y     |     N      |         是否确认入座。默认为0(0：未确认；1：已确认)          |



### 5.用户状态表（uer_state）

|   名称   |    类型     | 是否可空 | 是否为主键 |           注释           |
| :------: | :---------: | :------: | :--------: | :----------------------: |
| unionid  | varchar(30) |    N     |     Y      | 微信用户在平台的唯一标识 |
| ban_date | varchar(30) |    N     |     Y      |  起始被禁时间yyyy-mm-dd  |

### 6.收藏表（Favorites）

| 名称      | 类型        | 是否可空 | 是否为主键 | 注释                     |
| --------- | ----------- | -------- | ---------- | ------------------------ |
| unionid   | varchar(30) | N        | Y          | 微信用户在平台的唯一标识 |
| seat_list | text        | N        | N          | 作为列表，id 以“，”隔开  |

